version: '3.7'
services:
  web:
    container_name: chnge_web
    restart: always
    platform: linux/arm64
    image: toreanjoel/chnge:latest_web
    environment:
      - REACT_APP_CHNGE_API=${CHNGE_API}
      - REACT_APP_FIREBASE_API_KEY=${FIREBASE_API_KEY}
      - REACT_APP_FIREBASE_AUTH_DOMAIN=${FIREBASE_AUTH_DOMAIN}
      - REACT_APP_FIREBASE_DB_URL=${FIREBASE_DB_URL}
      - REACT_APP_FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
      - REACT_APP_FIREBASE_STORAGE_BUCKET=${FIREBASE_STORAGE_BUCKET}
      - REACT_APP_FIREBASE_SENDER_ID=${FIREBASE_SENDER_ID}
      - REACT_APP_FIREBASE_APP_ID=${FIREBASE_APP_ID}
      - REACT_APP_FIREBASE_MEASUREMENT_ID=${FIREBASE_MEASUREMENT_ID}
    env_file:
      - web.env
    ports:
      - "4000:3000"
  api:
    container_name: chnge_api
    restart: always
    platform: linux/arm64
    image: toreanjoel/chnge:latest_api
    env_file:
      - api.env
    ports:
      - "5000:5000"
